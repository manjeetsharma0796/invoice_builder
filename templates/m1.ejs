<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 11px;
            color: #000;
            margin: 0;
            padding: 20px;
        }
        .invoice-wrapper {
            max-width: 800px;
            margin: 0 auto;
            border: 1px solid #000;
        }
        .header-top {
            text-align: right;
            padding: 2px 5px;
            border-bottom: 1px solid #000;
            font-size: 10px;
        }
        .company-header {
            text-align: center;
            padding: 10px;
        }
        .company-name {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .company-details {
            font-size: 11px;
            line-height: 1.4;
        }
        .title-bar {
            text-align: center;
            font-weight: bold;
            border-top: 1px solid #000;
            border-bottom: 1px solid #000;
            padding: 3px;
            background-color: #f9f9f9;
        }
        .info-section {
            display: flex;
            border-bottom: 1px solid #000;
        }
        .info-left {
            width: 50%;
            border-right: 1px solid #000;
            padding: 5px;
        }
        .info-right {
            width: 50%;
        }
        .info-right-table {
            width: 100%;
            border-collapse: collapse;
        }
        .info-right-table td {
            border-bottom: 1px solid #000;
            border-right: 1px solid #000;
            padding: 3px 5px;
            vertical-align: top;
            width: 50%;
        }
        .info-right-table td:last-child {
            border-right: none;
        }
        .info-right-table tr:last-child td {
            border-bottom: none;
        }
        .customer-label {
            font-size: 10px;
            margin-bottom: 2px;
        }
        .customer-name {
            font-weight: bold;
            font-size: 11px;
        }
        .terms-delivery {
            border-top: 1px solid #000;
            padding: 5px;
            min-height: 40px;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            border-bottom: 1px solid #000;
        }
        .items-table th, .items-table td {
            border-right: 1px solid #000;
            padding: 5px;
            text-align: center;
        }
        .items-table th {
            border-bottom: 1px solid #000;
            font-size: 11px;
        }
        .items-table td {
            vertical-align: top;
            height: 20px;
        }
        .items-table th:last-child, .items-table td:last-child {
            border-right: none;
        }
        .col-sl { width: 40px; }
        .col-desc { width: auto; text-align: left !important; }
        .col-hsn { width: 60px; }
        .col-gst { width: 60px; }
        .col-qty { width: 60px; }
        .col-rate { width: 80px; text-align: right !important; }
        .col-per { width: 40px; }
        .col-disc { width: 40px; }
        .col-amount { width: 100px; text-align: right !important; }

        .tax-row td {
            text-align: right !important;
            border-right: 1px solid #000;
            border-bottom: none;
            padding: 2px 5px;
        }
        .total-row {
            border-top: 1px solid #000;
            font-weight: bold;
        }
        .total-row td {
            text-align: right !important;
            padding: 5px;
        }

        .amount-words-section {
            padding: 5px;
            border-bottom: 1px solid #000;
        }
        .gst-table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }
        .gst-table th, .gst-table td {
            border: 1px solid #000;
            padding: 3px;
        }
        .gst-table th {
            font-weight: normal;
        }
        .gst-table .total-label {
            text-align: right;
            font-weight: bold;
        }

        .bank-details-section {
            display: flex;
            border-top: 1px solid #000;
        }
        .bank-details {
            width: 60%;
            padding: 5px;
            border-right: 1px solid #000;
            line-height: 1.5;
        }
        .signatory-section {
            width: 40%;
            padding: 5px;
            text-align: right;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .footer-terms {
            font-size: 9px;
            padding: 5px;
            line-height: 1.3;
        }
        .text-right { text-align: right; }
        .text-bold { font-weight: bold; }
    </style>
</head>
<body>

<div class="invoice-wrapper">
    <div class="header-top">Original Buyer/Seller/Transporter</div>
    
    <div class="company-header">
        <div class="company-name">M.R. ELECTRICALS</div>
        <div class="company-details">
            91/1 Dr. G.S Bose Road Kolkata -700039<br>
            Phone No.-9831149296/9163659580.<br>
            GSTIN:19CIIPS8859M1ZZ. STATE CODE :WB19
        </div>
    </div>

    <div class="title-bar">TAX INVOICE</div>

    <div class="info-section">
        <div class="info-left">
            <div class="customer-label">Customer</div>
            <div class="customer-name"><%= client_name %></div>
            <div class="customer-address"><%- client_address %></div>
            <div>PH : </div>
            <div>(M): &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<%= (typeof client_mobile !== 'undefined') ? client_mobile : '9903993225' %></div>
            <div>PAN: </div>
            <div>GSTIN/UIN:<%= client_gstin %></div>
            <div>STATE NAME:<%= client_state %></div>
            <div>Place of Supply:<%= (typeof place_of_supply !== 'undefined') ? place_of_supply : 'West Bengal' %></div>
        </div>
        <div class="info-right">
            <table class="info-right-table">
                <tr>
                    <td>Invoice No:<strong><%= invoice_number %></strong></td>
                    <td>Dated: <strong><%= invoice_date %></strong></td>
                </tr>
                <tr>
                    <td>Delivery Note<br><strong><%= delivery_note %></strong></td>
                    <td>Mode/Terms of Payment<br><strong><%= (typeof mode_of_payment !== 'undefined') ? mode_of_payment : '' %></strong></td>
                </tr>
                <tr>
                    <td>Supplier's Ref<br><strong><%= supplier_ref %></strong></td>
                    <td>Other Reference(s)<br><strong><%= (typeof other_references !== 'undefined') ? other_references : '' %></strong></td>
                </tr>
                <tr>
                    <td>Buyer's Order No.<br><strong><%= buyer_order_no %></strong></td>
                    <td>Dated<br><strong><%= (typeof buyer_order_date !== 'undefined') ? buyer_order_date : '' %></strong></td>
                </tr>
                <tr>
                    <td>Despatch Document No.<br><strong><%= despatch_doc_no %></strong></td>
                    <td>Delivery Note Date<br><strong><%= (typeof delivery_note_date !== 'undefined') ? delivery_note_date : '' %></strong></td>
                </tr>
                <tr>
                    <td>Despatch Through<br><strong><%= despatch_through %></strong></td>
                    <td>Destination<br><strong><%= destination %></strong></td>
                </tr>
            </table>
            <div class="terms-delivery">
                <div class="customer-label">Terms of Delivery</div>
                <%= terms_of_delivery %>
            </div>
        </div>
    </div>

    <table class="items-table">
        <thead>
            <tr>
                <th class="col-sl">Sl No.</th>
                <th class="col-desc">Description of Goods</th>
                <th class="col-hsn">HSN/SAC</th>
                <th class="col-gst">GST Rate</th>
                <th class="col-qty">Quantity</th>
                <th class="col-rate">Rate</th>
                <th class="col-per">per</th>
                <th class="col-disc">Disc%</th>
                <th class="col-amount">Amount</th>
            </tr>
        </thead>
        <tbody>
            <% (line_items || []).forEach(function(item) { %>
            <tr>
                <td><%= item.sl_no %></td>
                <td class="col-desc"><strong><%= item.description %></strong></td>
                <td><%= item.hsn_sac %></td>
                <td><%= item.gst_rate %></td>
                <td><%= item.quantity %></td>
                <td><%= item.rate %></td>
                <td><%= item.per %></td>
                <td><%= item.disc_percent %></td>
                <td><%= item.amount %></td>
            </tr>
            <% }); %>
            
            <!-- Spacing rows if needed, or just these totals -->
            <tr class="tax-row">
                <td colspan="2"></td>
                <td colspan="6" style="text-align: right; border-right: 1px solid #000;"><strong>SGST</strong></td>
                <td style="border-right: none;"><%= sgst_amount %></td>
            </tr>
            <tr class="tax-row">
                <td colspan="2"></td>
                <td colspan="6" style="text-align: right; border-right: 1px solid #000;"><strong>CGST</strong></td>
                <td style="border-right: none;"><%= cgst_amount %></td>
            </tr>
            <tr class="tax-row">
                <td colspan="2"></td>
                <td colspan="6" style="text-align: right; border-right: 1px solid #000;"><strong>Round Off</strong></td>
                <td style="border-right: none;"><%= round_off %></td>
            </tr>
            <tr class="total-row">
                <td colspan="2" style="text-align: right;">Total</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td style="border-right: none;"><%= total_amount %></td>
            </tr>
        </tbody>
    </table>

    <div class="amount-words-section">
        <div style="display: flex; justify-content: space-between;">
            <div><strong>Amount Chargeable(in words)</strong></div>
            <div style="font-size: 10px;">E.& O.E</div>
        </div>
        <div style="margin-top: 5px;">Rs. <strong><%= amount_in_words %></strong></div>
    </div>

    <table class="gst-table">
        <thead>
            <tr>
                <th rowspan="2">HSN/SAC</th>
                <th rowspan="2">Taxable Value</th>
                <th colspan="2">Central Tax</th>
                <th colspan="2">State Tax</th>
                <th rowspan="2">Total Tax Amount</th>
            </tr>
            <tr>
                <th>Rate</th>
                <th>Amount</th>
                <th>Rate</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            <% (hsn_summary || []).forEach(function(row) { %>
            <tr>
                <td style="text-align: left;"><%= row.hsn_sac %></td>
                <td style="text-align: right;"><%= row.taxable_value %></td>
                <td><%= row.cgst_rate %></td>
                <td style="text-align: right;"><%= row.cgst_amount %></td>
                <td><%= row.sgst_rate %></td>
                <td style="text-align: right;"><%= row.sgst_amount %></td>
                <td style="text-align: right;"><%= row.total_tax %></td>
            </tr>
            <% }); %>
            <tr style="font-weight: bold;">
                <td class="total-label">Total</td>
                <td style="text-align: right;"><%= (typeof taxable_total !== 'undefined') ? taxable_total : '' %></td>
                <td></td>
                <td style="text-align: right;"><%= (typeof cgst_total !== 'undefined') ? cgst_total : '' %></td>
                <td></td>
                <td style="text-align: right;"><%= (typeof sgst_total !== 'undefined') ? sgst_total : '' %></td>
                <td style="text-align: right;"><%= (typeof total_tax_amount !== 'undefined') ? total_tax_amount : '' %></td>
            </tr>
        </tbody>
    </table>

    <div class="amount-words-section">
        <strong>Tax Amount (in words): <%= tax_amount_in_words %></strong>
    </div>

    <div class="bank-details-section">
        <div class="bank-details">
            Company Bank Details :<br>
            Bank Name : <strong>Bank Of India</strong><br>
            Branch &IFSC Code : <strong>TILJALA BKID0004046</strong><br>
            A/c No. : <strong>404620110000213</strong>
        </div>
        <div class="signatory-section">
            <div style="font-weight: bold;">For M.R. ELECTRICALS</div>
            <div style="font-size: 9px;">Authorised Signatory</div>
        </div>
    </div>

    <div class="footer-terms">
        (1)We are not responsibe for any Brekage/Damage/Shaortage/Leakage in transit.<br>
        (2)Our responsibility ceases when the goods are delivered to the carrier.<br>
        (3)Goods once sold will not be accepted back.<br>
        (4)Interest @12% p.a. will be charged, if invoice is not paid on or before due date.<br>
        (5)Subject to Kolkata Jurisdiction.
    </div>
</div>

</body>
</html>