{
  "type": "object",
  "required": [
    "invoice_number",
    "invoice_date",
    "vendor",
    "line_items",
    "subtotal",
    "tax_amount",
    "total_amount",
    "currency"
  ],
  "properties": {
    "invoice_number": {
      "type": "string",
      "description": "Unique invoice identifier"
    },
    "invoice_date": {
      "type": "string",
      "format": "date",
      "description": "Invoice date in YYYY-MM-DD format"
    },
    "due_date": {
      "type": "string",
      "format": "date",
      "description": "Payment due date in YYYY-MM-DD format"
    },
    "purchase_order": {
      "type": "string",
      "description": "Purchase order number if present"
    },
    "vendor": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": { "type": "string", "description": "Vendor / supplier name" },
        "address": { "type": "string", "description": "Vendor address" },
        "gstin": { "type": "string", "description": "Vendor GSTIN / Tax ID" },
        "phone": { "type": "string", "description": "Vendor phone number" },
        "email": { "type": "string", "description": "Vendor email" }
      }
    },
    "bill_to": {
      "type": "object",
      "properties": {
        "name": { "type": "string", "description": "Customer / buyer name" },
        "address": { "type": "string", "description": "Customer address" },
        "gstin": { "type": "string", "description": "Customer GSTIN / Tax ID" }
      }
    },
    "line_items": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["description", "quantity", "unit_price", "amount"],
        "properties": {
          "sl_no": { "type": "integer", "description": "Serial number" },
          "description": { "type": "string", "description": "Item description" },
          "hsn_sac": { "type": "string", "description": "HSN/SAC code" },
          "quantity": { "type": "number", "description": "Quantity" },
          "unit": { "type": "string", "description": "Unit of measure (pcs, kg, etc.)" },
          "unit_price": { "type": "number", "description": "Price per unit" },
          "discount": { "type": "number", "description": "Discount amount" },
          "tax_rate": { "type": "number", "description": "Tax rate percentage" },
          "tax_amount": { "type": "number", "description": "Tax amount for this item" },
          "amount": { "type": "number", "description": "Total amount for this line" }
        }
      }
    },
    "subtotal": {
      "type": "number",
      "description": "Sum before taxes"
    },
    "discount_total": {
      "type": "number",
      "description": "Total discount amount"
    },
    "tax_breakdown": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "tax_type": { "type": "string", "description": "e.g. CGST, SGST, IGST, VAT" },
          "rate": { "type": "number", "description": "Tax rate percentage" },
          "amount": { "type": "number", "description": "Tax amount" }
        }
      }
    },
    "tax_amount": {
      "type": "number",
      "description": "Total tax amount"
    },
    "total_amount": {
      "type": "number",
      "description": "Grand total (subtotal + tax - discount)"
    },
    "amount_in_words": {
      "type": "string",
      "description": "Total amount in words"
    },
    "currency": {
      "type": "string",
      "description": "Currency code (INR, USD, EUR, etc.)"
    },
    "payment_terms": {
      "type": "string",
      "description": "Payment terms or conditions"
    },
    "bank_details": {
      "type": "object",
      "properties": {
        "bank_name": { "type": "string" },
        "account_number": { "type": "string" },
        "ifsc": { "type": "string" },
        "branch": { "type": "string" }
      }
    },
    "notes": {
      "type": "string",
      "description": "Additional notes or remarks"
    }
  }
}
