{
  "type": "object",
  "required": [
    "invoice_number",
    "invoice_date",
    "vendor",
    "line_items",
    "subtotal",
    "tax_amount",
    "total_amount",
    "currency"
  ],
  "properties": {
    "invoice_number": {
      "type": "string",
      "description": "Unique invoice identifier"
    },
    "invoice_date": {
      "type": "string",
      "format": "date",
      "description": "Invoice date in YYYY-MM-DD format"
    },
    "due_date": {
      "type": "string",
      "format": "date",
      "description": "Payment due date in YYYY-MM-DD format"
    },
    "purchase_order": {
      "type": "string",
      "description": "Purchase order number if present"
    },
    "vendor": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": { "type": "string", "description": "Vendor / supplier name" },
        "address": { "type": "string", "description": "Vendor address" },
        "gstin": { "type": "string", "description": "Vendor GSTIN / Tax ID" },
        "phone": { "type": "string", "description": "Vendor phone number" },
        "email": { "type": "string", "description": "Vendor email" }
      }
    },
    "bill_to": {
      "type": "object",
      "properties": {
        "name":    { "type": "string", "description": "Customer / buyer name" },
        "address": { "type": "string", "description": "Customer address" },
        "gstin":   { "type": "string", "description": "Customer GSTIN / Tax ID" },
        "pan":     { "type": "string", "description": "Customer PAN number" },
        "phone":   { "type": "string", "description": "Customer phone number" },
        "state":   { "type": "string", "description": "Customer state name and code" }
      }
    },
    "line_items": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["description", "quantity", "unit_price", "amount"],
        "properties": {
          "sl_no": { "type": "integer", "description": "Serial number" },
          "description": {
            "type": "string",
            "description": "Item description"
          },
          "hsn_sac": { "type": "string", "description": "HSN/SAC code" },
          "quantity": { "type": "number", "description": "Quantity" },
          "unit": {
            "type": "string",
            "description": "Unit of measure (pcs, kg, etc.)"
          },
          "unit_price": { "type": "number", "description": "Price per unit" },
          "discount": { "type": "number", "description": "Discount amount" },
          "tax_rate": {
            "type": "number",
            "description": "Tax rate percentage"
          },
          "tax_amount": {
            "type": "number",
            "description": "Tax amount for this item"
          },
          "amount": {
            "type": "number",
            "description": "Total amount for this line"
          }
        }
      }
    },
    "subtotal": {
      "type": "number",
      "description": "Sum before taxes"
    },
    "discount_total": {
      "type": "number",
      "description": "Total discount amount"
    },
    "sgst_amount": {
      "type": "number",
      "description": "State GST (SGST) total amount"
    },
    "cgst_amount": {
      "type": "number",
      "description": "Central GST (CGST) total amount"
    },
    "igst_amount": {
      "type": "number",
      "description": "Integrated GST (IGST) total amount if applicable"
    },
    "round_off": {
      "type": "number",
      "description": "Rounding adjustment amount"
    },
    "hsn_summary": {
      "type": "array",
      "description": "HSN/SAC wise tax summary table",
      "items": {
        "type": "object",
        "properties": {
          "hsn_sac":       { "type": "string", "description": "HSN or SAC code" },
          "taxable_value": { "type": "number", "description": "Taxable value for this HSN code" },
          "cgst_rate":     { "type": "number", "description": "CGST rate %" },
          "cgst_amount":   { "type": "number", "description": "CGST amount" },
          "sgst_rate":     { "type": "number", "description": "SGST rate %" },
          "sgst_amount":   { "type": "number", "description": "SGST amount" },
          "igst_rate":     { "type": "number", "description": "IGST rate % if applicable" },
          "igst_amount":   { "type": "number", "description": "IGST amount if applicable" },
          "total_tax":     { "type": "number", "description": "Total tax for this row" }
        }
      }
    },
    "tax_breakdown": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "tax_type": {
            "type": "string",
            "description": "e.g. CGST, SGST, IGST, VAT"
          },
          "rate": { "type": "number", "description": "Tax rate percentage" },
          "amount": { "type": "number", "description": "Tax amount" }
        }
      }
    },
    "tax_amount": {
      "type": "number",
      "description": "Total tax amount"
    },
    "total_amount": {
      "type": "number",
      "description": "Grand total (subtotal + tax - discount)"
    },
    "amount_in_words": {
      "type": "string",
      "description": "Total amount chargeable in words (e.g. Rupees Fifteen Thousand...)"
    },
    "tax_amount_in_words": {
      "type": "string",
      "description": "Tax amount in words"
    },
    "currency": {
      "type": "string",
      "description": "Currency code (INR, USD, EUR, etc.)"
    },
    "payment_terms": {
      "type": "string",
      "description": "Payment terms or conditions"
    },
    "delivery_note": {
      "type": "string",
      "description": "Delivery note number"
    },
    "supplier_ref": {
      "type": "string",
      "description": "Supplier reference number"
    },
    "buyer_order_no": {
      "type": "string",
      "description": "Buyer order number"
    },
    "despatch_doc_no": {
      "type": "string",
      "description": "Despatch document number"
    },
    "despatch_through": {
      "type": "string",
      "description": "Carrier or despatch through details"
    },
    "destination": {
      "type": "string",
      "description": "Delivery destination"
    },
    "terms_of_delivery": {
      "type": "string",
      "description": "Terms of delivery"
    },
    "bank_details": {
      "type": "object",
      "properties": {
        "bank_name": { "type": "string" },
        "account_number": { "type": "string" },
        "ifsc": { "type": "string" },
        "branch": { "type": "string" }
      }
    },
    "notes": {
      "type": "string",
      "description": "Additional notes or remarks / terms and conditions"
    }
  }
}
